#!/usr/bin/env python

from zeroinstall.injector import config

c = config.load_config()
for uri in c.iface_cache.list_all_interfaces():
	iface = c.iface_cache.get_interface(uri)

	def header():
		global header
		print
		print uri
		header = lambda: None

	# User-added feeds
	if iface.extra_feeds:
		header()
		for feed in iface.extra_feeds:
			print "-", feed.uri

	# User-set ratings
	for url, feed in c.iface_cache.get_feeds(iface).items():
		if feed is None: continue
		for impl in feed.implementations.values():
			if impl.user_stability is not None:
				header()
				print impl.get_version(), impl.user_stability
