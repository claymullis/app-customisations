#!/usr/bin/env python
import sys
import subprocess, os

targets = sys.argv[1:]
try:
	idx = targets.index('--')
except ValueError:
	cmd = []
else:
	cmd = targets[idx+1:]
	targets = targets[:idx]

rv = subprocess.Popen(['gup', '-u'] + targets).wait()
if rv != 0: sys.exit(rv)

cmd = cmd + targets

# print repr({'cmd':cmd + targets,'targets':targets})
os.execvp(cmd[0], cmd)

