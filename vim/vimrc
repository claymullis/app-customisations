syntax on
set number
filetype plugin on
color ir_black

set encoding=utf-8
set textwidth=0
set backupdir=~/.tmp
set directory=~/.tmp
set nojoinspaces " just one space after a period (when joining)
set nofoldenable " I can never remember how to use folding
set autoread " reload file whenever it changes on disk
set wrapmargin=5
set nowrap
set formatoptions=croqln
set formatoptions=croqln
command! Emailmode set formatoptions=croqantw textwidth=70
set tabstop=2
set cursorline
set softtabstop=2
set shiftwidth=2
set ignorecase
set smartcase
set incsearch
set scrolloff=3
set sidescrolloff=5
set wildmode=longest,list
set nocompatible
set autoindent
set smartindent
set mouse=a
" allow status-bar windows (0-height)
set wmh=0
" set iskeyword-=_ \" allow underscore to delimit words"

if has("gui_running")
	set lines=40 columns=160
endif

"draw tabs & trailing spaces
autocmd BufNewFile,BufRead * set list listchars=tab:▸\ 
set list listchars=tab:▸\ 

"highlight any spaces that are followed by a tab (the horror!)
" and any _single_ space that comes after ^\t+ (this is usually accedental)
" and also trailing spaces
autocmd BufNewFile,BufRead * match Error /\( \+\t\@=\)\|\(^\(\t\+\)\zs \ze[^ ]\)\|\([^ \t]\zs\s\+$\)/
                             match Error /\( \+\t\@=\)\|\(^\(\t\+\)\zs \ze[^ ]\)\|\([^ \t]\zs\s\+$\)/

" tab left & right
map <A-j> gt
map <A-k> gT
" same for macvim (cmd key, because alt doesn't work)
map <D-j> gt
map <D-k> gT

" I don't use man much, and i keep accidentally hitting it
map <S-k> lh

" quote character to highlight inside brackets
nmap ; vib
" and keep going ...
vmap ; <esc>llvib
" ctrl + b to highlight current word
map <C-b> viw
" and then keep extending it
vmap <C-b> o?\<<cr>o2/\><cr>h
" \w should maybe do the same thing?
nmap <leader>w <c-b>
vmap <leader>w <c-b>

" surround selection with things:
vmap <leader>( <esc>`<i(<esc>`>la)<esc>
vmap <leader>[ <esc>`<i[<esc>`>la]<esc>
vmap <leader>< <esc>`<i<<esc>`>la><esc>
vmap <leader>{ <esc>`<i{<esc>`>la}<esc>
vmap <leader>' <esc>`<i'<esc>`>la'<esc>
vmap <leader>" <esc>`<i"<esc>`>la"<esc>
" ) kills the surrounding characters of a selection
vmap <leader>) <esc>`<hx`>x

" home & end
map <C-l> $
map <C-h> ^
map <space> h
map <C-Space> ^
map <S-Space> b
" foward & back words at a time
map <S-h> b
map <S-l> w

" ctrl + backspace for deleting a word
imap <C-BS> <C-W>

" ctrl + space to insert an underscore
imap <C-space> _

" ctrl-tab for completion
imap <C-tab> <c-n>
imap <C-S-tab> <c-p>

" scroll (without moving cursor) on ctrl+j/k
map <C-k> <C-y>
map <C-j> <C-e>

" alt + up/down to move lines
nmap <a-up> ddkP
nmap <a-down> ddp
" and the same for mac using the option key
nmap <D-up> ddkP
nmap <D-down> ddp


" copy / paste (gvim, with the gui clipboard)
vmap <C-c> "+y
imap <C-v> <esc>"+gpi

" select all in visual mode
vmap <C-a> <esc>ggVG

" delete to the "black hole" buffer
map <S-d> "_d

" new tab with ctl+t
nmap <C-t> :tabnew<cr>

" map alt+slash to line comment toggle
map <A-/> :silent TComment<cr>
map <D-/> :silent TComment<cr>

" option (or alt) + r to run the current file
nmap <D-r> :up<cr>:!`pwd`/%<cr>
nmap <A-r> :up<cr>:!`pwd`/%<cr>

" ctrl+f to FuzzyFinder (recursive)
map <C-f> :call g:FuzzyFinderMode.File.launch_base("**/", 0)<cr>
command! -narg=1 -complete=dir Find call g:FuzzyFinderMode.File.launch_base("<args>" . "/**/", 0)

" copy full path to clipboard
nmap <C-c> :silent !echo -n "%:p" \| pbcopy<cr>
